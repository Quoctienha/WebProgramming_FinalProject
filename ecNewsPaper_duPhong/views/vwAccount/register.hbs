{{#section 'css'}}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.min.css">
{{/section}}

{{#section 'js'}}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js"></script>
  <script>
    $('#frmRegister').on('submit', function (e) {
      e.preventDefault();

      const username = $('#txtUsername').val();
      if (username.length === 0) {
        alert('Invalid data!');
        return;
      }

      $.getJSON(`/account/is-available?username=${username}`, function (data) {
        if (data === false) {
          alert('Not available!');
        } else {
          $('#frmRegister').off('submit').submit();
        }
      });
    });

    $('#txtDOB').datetimepicker({
      timepicker: false,
      format: 'd/m/Y',
      mask: true
    });

    //$('#txtUsername').select();
  </script>
{{/section}}

<form id="frmRegister" method="post">
  <div class="card bg bg-light">
    <h4 class="card-header bg bg-info text-white d-flex justify-content-between">
      <div>
        <i class="bi bi-person-fill-add"></i>
        Đăng ký tài khoản ecNewsPaper
      </div>
      <div>
        <a href="/" class="btn btn-info" role="button" aria-pressed="true"><i class="bi bi-backspace"></i></a>
     </div>
    </h4>
    <div class="card-body">
      <h5>Thông tin đăng nhập (bắt buộc)</h5>
      <div class="form-group">
        <label for="txtUsername">Tên đăng nhập</label>
        <input type="text" class="form-control" id="txtUsername" name="username" placeholder="Tên đăng nhập"/>
      </div>
      <div class="form-group">
        <label for="txtPassword">Mật khẩu</label>
        <input type="password" class="form-control" id="txtPassword" name="raw_password" placeholder="Mật khẩu"/>
      </div>
      <div class="form-group mb-5">
        <label for="txtConfirm">Xác nhận lại mật khẩu</label>
        <input type="password" class="form-control" name="confirm_password" id="txtConfirm" placeholder="Nhập lại mật khẩu của bạn"/>
      </div>
    <hr>
      <h5>Hồ sơ người dùng</h5>
      <div class="form-group">
        <label for="txtFullname">Họ và tên</label>
        <input type="text" class="form-control" id="txtFullname" name="Fullname" placeholder="Họ tên đầy đủ của bạn"/>
      </div>
      <div class="form-group">
        <label for="txtAddress">Địa chỉ</label>
        <input type="text" class="form-control" id="txtAddress" name="Address" placeholder="Địa chỉ"/>
      </div>
      <div class="form-group">
        <label for="txtPhone">Số điện thoại</label>
        <input type="text" class="form-control" id="txtPhone" name="Phone" placeholder="Số điện thoại"/>
      </div>
      <div class="form-group">
        <label for="txtEmail">Email (bắt buộc)</label>
        <input type="text" class="form-control" id="txtEmail" name="Email" placeholder="Email"/>
      </div>
      <div class="form-group">
        <label for="txtDOB">Ngày sinh</label>
        <input type="text" class="form-control" id="txtDOB" name="raw_dob" />
      </div>
    </div>
    <div class="card-footer text-right">
      <button type="submit" class="btn btn-outline-success">
        <i class="bi bi-plus-square"></i>
        Đăng ký tài khoản
      </button>
    </div>
  </div>
</form>
